<div class="container p-t-50">
    <ul id="results-tab" class="nav nav-tabs" role="tablist">
        <li><a href="#tab1" data-toggle="tab" aria-expanded="false">Результаты тестов</a></li>
        <li><a href="#tab2" data-toggle="tab" aria-expanded="true">Детально</a></li>
    </ul>
    <div class="tab-content p-t-20">
        <div id="tab1" class="tab-pane fade">
            <table class="table table-striped table-bordered">
                <thead>
                <tr>
                    <th>Пользователь</th>
                    <th>Тест</th>
                    <th>Дата прохождения теста</th>
                    <th>Оценка</th>
                    <th>Результат</th>
                    <th>Параметры</th>
                </tr>
                </thead>
                <tbody>
                #{list items:_testResults, as:'tr'}
                <tr>
                    <td>${tr.getAccount().getEmail()}</td>
                    <td>${tr.getTest().getName()}</td>
                    <td>${tr.getResultDate()}</td>
                    <td>${tr.getResult()}</td>
                    <td>${tr.getResultDescr()}</td>
                    <td>
                    %{resAttrs = tr.getTestResultAttrs().sort{it.testAttr.sortOrder}}%
                        #{list items:resAttrs, as:'attr'}
                            <div>${attr.getTestAttr().getName()}: ${attr.getVal()}</div>
                        #{/list}
                    </td>
                </tr>
                #{/list}
                </tbody>
            </table>
        </div>

        <div id="tab2" class="tab-pane fade">
            <table class="table table-striped table-bordered">
                <thead>
                <tr>
                    <th>Пользователь</th>
                    <th>Тест</th>
                    <th>Дата прохождения теста</th>
                    <th>Оценка</th>
                    <th>Результат</th>
                    <th>#</th>
                    <th>Параметр</th>
                    <th>Результат</th>
                </tr>
                </thead>
                <tbody>
                #{list items:_testResults, as:'tr'}
                    #{list items:tr.getTestResultAttrs(), as:'attr'}
                    <tr>
                        <td>${tr.getAccount().getEmail()}</td>
                        <td>${tr.getTest().getName()}</td>
                        <td>${tr.getResultDate()}</td>
                        <td>${tr.getResult()}</td>
                        <td>${tr.getResultDescr()}</td>
                        <td>${attr.getTestAttr().getSortOrder()}</td>
                        <td>${attr.getTestAttr().getName()}</td>
                        <td>${attr.getVal()}</td>
                    </tr>
                    #{/list}
                #{/list}
                </tbody>
            </table>
        </div>
    </div>
</div>